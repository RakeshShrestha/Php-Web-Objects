<?phpfunction getUrl($path = null) {    if (PATH_URI != '/') {        return SITE_URI . PATH_URI . '/' . $path;    } else {        return SITE_URI . '/' . $path;    }}function setCurrentUser(array $userdata = array()) {    $sess = Session::getContext(SESS_TYPE);    $sess->authUser = $userdata;}function getCurrentUser() {    $sess = Session::getContext(SESS_TYPE);    return $sess->authUser;}function getCurrentUserID() {    $sess = Session::getContext(SESS_TYPE);    return isset($sess->authUser['id']) ? $sess->authUser['id'] : '';}function getCurrentUserType() {    $sess = Session::getContext(SESS_TYPE);    return isset($sess->authUser['perms']) ? $sess->authUser['perms'] : '';}if (!function_exists('mb_ucwords')) {    function mb_ucwords($str) {        return mb_convert_case($str, MB_CASE_TITLE, "UTF-8");    }}if (!function_exists('str_clean')) {    function str_clean($string) {        $search = array('/[^\w\-\. ]+/u', '/\s\s+/', '/\.\.+/', '/--+/', '/__+/');        return trim(preg_replace($search, array(' ', ' ', '.', '-', '_'), $string), '-._ ');    }}if (!function_exists('real_strip_tags')) {    function real_strip_tags($html) {        $allowedtags = array('a', 'p', 'strong', 'br', 'ul', 'li', 'img');        $disabledattributes = array('onabort', 'onactivate', 'onafterprint', 'onafterupdate', 'onbeforeactivate', 'onbeforecopy', 'onbeforecut', 'onbeforedeactivate', 'onbeforeeditfocus', 'onbeforepaste', 'onbeforeprint', 'onbeforeunload', 'onbeforeupdate', 'onblur', 'onbounce', 'oncellchange', 'onchange', 'onclick', 'oncontextmenu', 'oncontrolselect', 'oncopy', 'oncut', 'ondataavaible', 'ondatasetchanged', 'ondatasetcomplete', 'ondblclick', 'ondeactivate', 'ondrag', 'ondragdrop', 'ondragend', 'ondragenter', 'ondragleave', 'ondragover', 'ondragstart', 'ondrop', 'onerror', 'onerrorupdate', 'onfilterupdate', 'onfinish', 'onfocus', 'onfocusin', 'onfocusout', 'onhelp', 'onkeydown', 'onkeypress', 'onkeyup', 'onlayoutcomplete', 'onload', 'onlosecapture', 'onmousedown', 'onmouseenter', 'onmouseleave', 'onmousemove', 'onmoveout', 'onmouseover', 'onmouseup', 'onmousewheel', 'onmove', 'onmoveend', 'onmovestart', 'onpaste', 'onpropertychange', 'onreadystatechange', 'onreset', 'onresize', 'onresizeend', 'onresizestart', 'onrowexit', 'onrowsdelete', 'onrowsinserted', 'onscroll', 'onselect', 'onselectionchange', 'onselectstart', 'onstart', 'onstop', 'onsubmit', 'onunload');        return preg_replace('/<(.*?)>/ie', "'<' . preg_replace(array('/javascript:[^\"\']*/i', '/(" . implode('|', $disabledattributes) . ")[ \\t\\n]*=[ \\t\\n]*[\"\'][^\"\']*[\"\']/i', '/\s+/'), array('', '', ' '), stripslashes('\\1')) . '>'", strip_tags($html, implode('', $allowedtags)));    }}if (!function_exists('mk_dir')) {    function mk_dir($path, $mode = 0777, $rec = true) {        $oldumask = umask(0);        mkdir($path, $mode, $rec);        umask($oldumask);    }}function clean($string = null) {    return str_clean($string);}function getRequestIP() {    return $_SERVER['REMOTE_ADDR'];}function genUID() {    return mb_substr(md5(uniqid(rand())), 0, 12);}